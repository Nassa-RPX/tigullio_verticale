---
import { eq, db, Date as DbDate } from 'astro:db';

interface Props { programYear: number; }

const { programYear} = Astro.props;
const dates = await db.select().from(DbDate).where(eq(DbDate.programYear, programYear))

---

<section class="dates-list">
  {dates.map((date) => (
    <div class="card" data-slug={date.slug} data-year={programYear} >

    <span class="card-info">
      {new Date(date.date).toLocaleDateString('it-IT')} | {date.location} 
    </span>

    <h2> {date.title} </h2>
    <p class="card-description"> {date.timeInfo} </p>
    </div>
  ))}
</section>

<script src="@/scripts/program/program-events.ts" />

<style scoped>
.dates-list {
  flex: 1;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  align-items: center;
  justify-content: flex-start;
}

</style>
